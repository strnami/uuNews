"use strict";

const { UuObjectDao } = require("uu_appg01_objectstore");

class SysAppWorkspaceConfigMongo extends UuObjectDao {
  async createSchema() {
    await super.createIndex(
      {
        awid: 1
      },
      { unique: true }
    );
  }

  create(uuObject) {
    if (Array.isArray(uuObject)) {
      return super.insertMany(uuObject);
    } else {
      return super.insertOne(uuObject);
    }
  }

  getByAwid(awid) {
    return super.findOne({ awid: awid });
  }

  getCount(awid) {
    return super.count({ awid });
  }

  update(uuObject) {
    return super.findOneAndUpdate(
      {
        awid: uuObject["awid"]
      },
      uuObject,
      "NONE"
    );
  }

  clear(awid, toUnsetAttributes) {
    return super.findOneAndUpdate({ awid }, { $unset: toUnsetAttributes }, "NONE");
  }

  deleteByAwid(awid) {
    return super.deleteOne({ awid: awid });
  }
}

module.exports = SysAppWorkspaceConfigMongo;
